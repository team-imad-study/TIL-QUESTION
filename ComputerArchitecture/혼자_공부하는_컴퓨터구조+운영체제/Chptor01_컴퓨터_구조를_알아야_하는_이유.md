# DAY01
작성일 : 2024/03/05

> 범위
- 01 컴퓨터 구조를 알아야하는 이유
- 02 컴퓨터 구조의 큰그림

---

> 작성자 : 

---

> 작성자 : Quarang

## Q. 메모리에 데이터는 어떻게 분류되고 어떻게 저장될까?

운영체제는 메모리에 이 프로그램을 위한 공간을 할당해주는데 그 공간은 4가지로 나뉘게 됨

> 코드영역

- `소스코드`가 `기계어 형태`로 저장됨
- 컴파일 시점에 결정되고, 중간에 코드가 변경되지 않도록 `Read-Only` 형태로 저장됨
  
> 데이터 영역

- `전역변수`, `static` 변수가 저장됨
- 프로그램 `시작과 동시에 할당되고`, 프로그램이 `종료되어야 메모리가 해제`됨
- 실행 도중 변수값이 변경될 수 있으니 `Read-Write`로 지정됨

```swift
struct Quarang{
    static let name = "유영웅"

    var age:Int?
    var language:String?

    func play(){}
}
```

- 참고로 swift에서 static은 기본 동작이 lazy로 동작함
- 해당 값에 처음 접근할 때 값이 할당되어 메모리에 올라감

> 힙 영역

- `프로그래머가 할당/해제` 하는 메모리영역
- 프로그래머는 `malloc,calloc`으로 힙에 메모리를 할당할 수 있으며, 이를 `동적할당`이라고 함
- 사용하고 난 후에는 반드시 `메모리 해제`를 해줘야함
- 그렇지 않으면 `memory leak`이 발생
- 다른 영역 중 유일하기 `런타임 시`에 결정되기 때문에 `데이터의 크기가 확실하지 않을 때` 사용함
- 클래스 인스턴스, 클로저 같은 참조 타입의 값이 이 메모리에 할당됨
 
|장점| 메모리 크기에 대한 제한이 없고, 프로그램의 모든 함수에서 액세스 가능함| 
|---|---|
|단점|할당 및 해제로 인한 속도저하와 메모리를 직접관리해야하는 수고가 있음|

> 스택영역

- 함수 호출시 함수의 지역변수, 매개변수, 리턴값등등이 저장되고, 함수가 종료되면 저장된 메모리도 해제됨
- 컴파일 타임에 결정되기 때문에 무한히 할당할 수 없음
- 함수가 실행 되는 순서로 스택 메모리에 할당 해제가 됨

```swift
func play(a:String,b:String) -> String{ 
    let sentence = "\(a)와 \(b)가 놀았다." 
    return sentence
}
```

**실행순서**
1. 함수 호출 → 스택 프레임 생성
2. 매개변수 및 변수 할당
3. 작업 수행
4. 반환 값 저장
5. 함수 종료 → 스택 프레임 제거 및 메모리 해제

--- 